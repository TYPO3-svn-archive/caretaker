plugin.tx_caretaker_pi_overview{
	
	template = FILE
	template.file = EXT:caretaker/res/html/pi_overview.html

	nodeMarkers {
		STATE = TEXT
		STATE.field = state_info
		STATE.case = lower
		
		TITLE = TEXT
		TITLE.field =  title
		#TITLE.append = TEXT 
		#TITLE.append.field = instance
		#TITLE.append.noTrimWrap = | [|]|
		#TITLE.append.required = 1
		TITLE.insertData = 1
		TITLE.typolink.parameter = {$caretaker.singleLinkID} {$caretaker.singleLinkParameter}
		TITLE.typolink.additionalParams.field = link_parameters
		TITLE.typolink.target = _blank
		
		DESCRIPTION = TEXT
		DESCRIPTION.value = {field:type}: {field:state_msg}
		DESCRIPTION.insertData = 1
		
		TYPE = TEXT
		TYPE.field = type
		TYPE.case = lower
	} 
	
	childMarkers {
		STATE = TEXT
		STATE.field = state_info
		STATE.case = lower
		
		TITLE = TEXT
		TITLE.value = {field:title}
		TITLE.insertData = 1
		TITLE.typolink.parameter = {$caretaker.singleLinkID} {$caretaker.singleLinkParameter}
		TITLE.typolink.additionalParams.field = link_parameters
		TITLE.typolink.target = _blank
		
		DESCRIPTION = TEXT
		DESCRIPTION.value = {field:state_msg}
		DESCRIPTION.insertData = 1
	} 	
}

plugin.tx_caretaker_pi_singleview{
	
	template = FILE
	template.file = EXT:caretaker/res/html/pi_singleview.html

	nodeMarkers {
	
		STATE = TEXT
		STATE.field = state_info
		STATE.case = lower
		
		LAST_RUN = TEXT
		LAST_RUN.field = state_tstamp
		LAST_RUN.strftime =  %x %X
		
		WARNING_TIME = TEXT
		WARNING_TIME.field = warning_time
		
		ERROR_TIME = TEXT
		ERROR_TIME.field = error_time
		
		VALUE = TEXT
		VALUE.field = state_value
		
		MESSAGE = TEXT
		MESSAGE.field = state_msg
		
		CHART_TITLE = TEXT
		CHART_TITLE.value = Chart
		CHART_TITLE.append = TEXT
		CHART_TITLE.append.field = range
		CHART_TITLE.append.stdWrap.wrap = / 24
		CHART_TITLE.append.prioriCalc = 1
		CHART_TITLE.append.noTrimWrap = | [|]|
		
		CHART_LINKS = COA
		CHART_LINKS.wrap = <ul class="chart_links" >|</ul>
		CHART_LINKS.10 = TEXT
		CHART_LINKS.10.value = 24 Stunden
		CHART_LINKS.10.typolink.parameter = {page:uid},0
		CHART_LINKS.10.typolink.parameter.insertData = 1 
		CHART_LINKS.10.typolink.additionalParams = &tx_caretaker_pi_singleview[id]={GPVar:tx_caretaker_pi_singleview|id}&tx_caretaker_pi_singleview[range]=24
		CHART_LINKS.10.typolink.additionalParams.insertData = 1
		CHART_LINKS.10.typolink.useCacheHash = 1
		CHART_LINKS.10.wrap = <li>|</li>
		
		CHART_LINKS.20 < .CHART_LINKS.10
		CHART_LINKS.20.value = 7 Tage
		CHART_LINKS.20.typolink.additionalParams = &tx_caretaker_pi_singleview[id]={GPVar:tx_caretaker_pi_singleview|id}&tx_caretaker_pi_singleview[range]=168
		
		CHART_LINKS.30 < .CHART_LINKS.10
		CHART_LINKS.30.value = 30 Tage
		CHART_LINKS.30.typolink.additionalParams = &tx_caretaker_pi_singleview[id]={GPVar:tx_caretaker_pi_singleview|id}&tx_caretaker_pi_singleview[range]=720
		
		CHART = HTML
		CHART.value.field = chart
		
		TITLE = TEXT
		TITLE.field =  title
		#TITLE.append = TEXT 
		#TITLE.append.field = instance
		#TITLE.append.noTrimWrap = | [|]|
		#TITLE.append.required = 1
		TITLE.insertData = 1
		
		DESCRIPTION = TEXT
		DESCRIPTION.field = description
		 
	} 
	
	childMarkers {
		STATE = TEXT
		STATE.field = state_info
		STATE.case = lower
		
		TITLE = TEXT
		TITLE.value = {field:title}
		TITLE.insertData = 1
		TITLE.typolink.parameter = {$caretaker.singleLinkID} {$caretaker.singleLinkParameter}
		TITLE.typolink.additionalParams.field = link_parameters
		TITLE.typolink.target = _self
		
		DESCRIPTION = TEXT
		DESCRIPTION.value = {field:type}: {field:state_msg}
		DESCRIPTION.insertData = 1
	} 	
}

plugin.tx_caretaker_pi_graphreport{
	template = FILE
	template.file = EXT:caretaker/res/html/pi_graphreport.html
	
	markers {
	
		CHART_TITLE = TEXT
		CHART_TITLE.value = Chart
		CHART_TITLE.append = TEXT
		CHART_TITLE.append.field = range
		CHART_TITLE.append.stdWrap.wrap = / 24
		CHART_TITLE.append.prioriCalc = 1
		CHART_TITLE.append.noTrimWrap = | [|]|
		
		CHART_LINKS = COA
		CHART_LINKS.wrap = <ul class="chart_links" >|</ul>
		CHART_LINKS.10 = TEXT
		CHART_LINKS.10.value = 24 Stunden
		CHART_LINKS.10.typolink.parameter = {page:uid},0
		CHART_LINKS.10.typolink.parameter.insertData = 1 
		CHART_LINKS.10.typolink.additionalParams = &tx_caretaker_pi_graphreport[range]=24
		CHART_LINKS.10.typolink.additionalParams.insertData = 1
		CHART_LINKS.10.typolink.useCacheHash = 1
		CHART_LINKS.10.wrap = <li>|</li>
		
		CHART_LINKS.20 < .CHART_LINKS.10
		CHART_LINKS.20.value = 7 Tage
		CHART_LINKS.20.typolink.additionalParams = &tx_caretaker_pi_graphreport[range]=168
		
		CHART_LINKS.30 < .CHART_LINKS.10
		CHART_LINKS.30.value = 30 Tage
		CHART_LINKS.30.typolink.additionalParams = &tx_caretaker_pi_graphreport[range]=720
		
		CHART = HTML
		CHART.value.field = chart
	}	
}

[globalVar = GP:tx_caretaker_pi_graphreport|range = 720]
plugin.tx_caretaker_pi_graphreport.markers.CHART_LINKS.30.wrap = <li class="active">|</li>
[globalVar = GP:tx_caretaker_pi_graphreport|range = 168]
plugin.tx_caretaker_pi_graphreport.markers.CHART_LINKS.20.wrap = <li class="active">|</li>
[globalVar = GP:tx_caretaker_pi_graphreport|range < 168]
plugin.tx_caretaker_pi_graphreport.markers.CHART_LINKS.10.wrap = <li class="active">|</li>
[global]

[globalVar = GP:tx_caretaker_pi_singleview|range = 720]
plugin.tx_caretaker_pi_singleview.nodeMarkers.CHART_LINKS.30.wrap = <li class="active">|</li>
[globalVar = GP:tx_caretaker_pi_singleview|range = 168]
plugin.tx_caretaker_pi_singleview.nodeMarkers.CHART_LINKS.20.wrap = <li class="active">|</li>
[globalVar = GP:tx_caretaker_pi_singleview|range < 168]
plugin.tx_caretaker_pi_singleview.nodeMarkers.CHART_LINKS.10.wrap = <li class="active">|</li>
[global]
		

page.includeCSS.caretaker = EXT:caretaker/res/css/caretaker.css